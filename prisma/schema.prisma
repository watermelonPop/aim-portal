generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  phone     String?
  role      Role
  createdAt DateTime @default(now())

  student   Student?
  professor Professor?
  advisor   Advisor?
}

model Student {
  userId               Int                    @id @unique
  user                 User                   @relation(fields: [userId], references: [id])
  studentId            String                 @unique
  major                String?
  graduationYear       Int?
}

model Professor {
  userId         Int     @id @unique
  user           User    @relation(fields: [userId], references: [id])
  department     String?
  officeLocation String?
}

model Advisor {
  userId             Int     @id @unique
  user               User    @relation(fields: [userId], references: [id])
  advisingDepartment String?
  advisorNotes       String?
}

model AccessibilityRequest {
  id          Int           @id @default(autoincrement())
  student     Student       @relation(fields: [studentId], references: [userId])
  studentId   Int
  requestedBy RequesterRole
  requestType String
  status      RequestStatus @default(PENDING)
  createdAt   DateTime      @default(now())

}

enum Role {
  STUDENT
  PROFESSOR
  ADVISOR
}

enum RequesterRole {
  STUDENT
  ADVISOR
}

enum RequestStatus {
  PENDING
  APPROVED
  DENIED
}


