generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Account {
  id        Int         @id @default(autoincrement())
  email     String      @unique
  name      String      
  role      Role
  createdAt DateTime    @default(now())
  student   Student?
  professor Professor?
  advisor   Advisor?
  user    User?
  settings  Settings?
  forms     Form[]
}

model User {
  userId                  Int                    @id @unique
  account                 Account                @relation(fields: [userId], references: [id])
  dob                     DateTime
  UIN                     Int?                   @unique
  phone_number            String
}

model Student {
  userId                  Int                    @id @unique
  account                 Account                @relation(fields: [userId], references: [id])
  dob                     DateTime
  UIN                     Int?                   @unique
  phone_number            String
  assistive_technologies  Assistive_Technology[]
  requests                Request[]
  accommodations          Accommodations[]
}

model Professor {
  userId                Int        @id @unique
  account               Account    @relation(fields: [userId], references: [id])
  department            String?
  courses               Course[]
}

model Advisor {
  userId                  Int                       @id @unique
  account                 Account                   @relation(fields: [userId], references: [id])
  role                    AdvisorRoles              @default(Coordinator)
  Accommodations          Accommodations[]
  assistive_technologies  Assistive_Technology[]
  requests                Request[]
  exams                   Exam[]
}

model Settings {
  userId                Int @id @unique
  account               Account   @relation(fields: [userId], references: [id]) 
  content_size          Int @default(100)
  highlight_tiles       Boolean @default(false)
  highlight_links       Boolean @default(false)
  text_magnifier        Boolean @default(false)
  align_text            Boolean @default(false)
  font_size             Int @default(100)
  line_height           Int @default(100)
  letter_spacing        Int @default(100)
  contrast              Contrast @default(Regular)
  saturation            Saturation @default(Regular)
  mute_sounds           Boolean @default(false)
  hide_images           Boolean @default(false)
  reading_mask          Boolean @default(false)
  highlight_hover       Boolean @default(false)
  cursor                Cursor @default(Regular)
}

model Form {
  id              Int   @id @default(autoincrement())
  name            String
  type            FormType
  status          FormStatus @default(PENDING)
  submittedDate   DateTime? // Can be null if not submitted
  dueDate         DateTime?
  createdAt       DateTime @default(now())
  formUrl         String?
  userId          Int
  user            Account  @relation(fields: [userId], references: [id])
}

model Important_Dates {
  id              Int     @id @default(autoincrement())
  type            String
  name            String
  date            DateTime
}

model Testing_Room {
  id              Int     @id @default(autoincrement())
  location        String  @default("Student Services Building")
  available       Boolean @default(true)
}

model Assistive_Technology {
  id              Int       @id @default(autoincrement())
  available       Boolean   @default(false)
  studentId       Int
  student         Student   @relation(fields: [studentId], references: [userId])
  type            String
  advisorId       Int
  advisor         Advisor   @relation(fields: [advisorId], references: [userId])

}

model Accommodations {
  id             Int       @id @default(autoincrement())
  type           String?
  status         String
  date_requested DateTime  @default(now())
  advisorId      Int
  advisor        Advisor   @relation(fields: [advisorId], references: [userId])
  studentId      Int
  student        Student   @relation(fields: [studentId], references: [userId])
  notes          String
}

model Request {
  id              Int       @id @default(autoincrement())
  studentId       Int
  advisorId       Int
  student         Student   @relation(fields: [studentId], references: [userId])
  advisor         Advisor   @relation(fields: [advisorId], references: [userId])
  notes           String?
  documentation   Boolean
}

model Course {
  id              Int         @id @default(autoincrement())
  name            String
  department      String
  professorId     Int
  professor       Professor   @relation(fields: [professorId], references: [userId])
  exams           Exam[]
}

model Exam {
  id              Int         @id @default(autoincrement())
  courseId        Int
  course          Course      @relation(fields: [courseId], references: [id])
  date            DateTime?
  location        String
  advisorId       Int
  advisor         Advisor     @relation(fields: [advisorId], references: [userId])
}

enum FormStatus {
  OVERDUE
  PENDING
  SUBMITTED
  APPROVED
  REJECTED
}

enum FormType {
  REGISTRATION_ELIGIBILITY
  ACADEMIC_CLASSROOM
  CAMPUS_LIVING_MOBILITY
  APPEALS_TEMP_WORKPLACE
}

enum Cursor {
  BBC
  BWC
  Regular
}

enum Saturation {
  Regular
  Low
  High
  Monochrome
}

enum Contrast {
  Regular
  Dark
  Light
  Monochrome
}

enum AdvisorRoles {
  Admin
  Coordinator
  Testing_Staff
  Tech_Staff
}

enum Role {
  STUDENT
  PROFESSOR
  ADVISOR
  USER
}

enum RequesterRole {
  STUDENT
  ADVISOR
}

enum RequestStatus {
  PENDING
  APPROVED
  DENIED
}







